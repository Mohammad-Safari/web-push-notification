<?xml version="1.0" encoding="UTF-8"?>
<configuration debug="false" scan="true" scanPeriod="1 minutes">
    <property name="ROOT_LEVEL" value="DEBUG" />
    <property name="APPLICATION_LEVEL" value="INFO" />
    <property name="STACK_TRACE_COUNT" value="10" />
    <property name="CLASS_NAME_LENGTH" value="40" />

    <property name="LOGPATH" scope="context"
        value="./log/project/project.log" />

    <property name="PATTERN" scope="context"
        value="%date{yyyy-MM-dd'T'HH}:%cyan(%date{mm:ss}).%date{SSS} %boldWhite(%highlight(%-7.7level)) requestId:[%white(%-5.5mdc{requestId})] thread:[%white(%-8.8(%thread))] clientIP:[%white(%-10.10mdc{clientIP})] %boldMagenta(%-70.70(%logger{${CLASS_NAME_LENGTH}}.%method%green(@%line))):%n    %yellow(%message) %red(%rootException{${STACK_TRACE_COUNT}}) %n" />

    <property name="ROLLINGPATTERN" scope="context"
        value="%date{yyyy-MM-dd'T'HH:mm:ss.SSS} %-7.7level requestId:[%-5.5mdc{requestId}] thread:[%-8.8(%thread))] clientIP:[%-10.10mdc{clientIP}] %-70.70(%logger{${CLASS_NAME_LENGTH}}.%method@%line):%n    %message %rootException{${STACK_TRACE_COUNT}} %n" />

    <property name="FILEPATTERN" scope="context"
        value="project.%d{yyyy-MM-dd_HH}.%i.log.zip" />

    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>${PATTERN}</pattern>
        </encoder>
    </appender>

    <appender name="ROLLING" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${LOGPATH}</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
            <fileNamePattern>${LOGPATH}/${FILEPATTERN}</fileNamePattern>
            <maxFileSize>200MB</maxFileSize>
        </rollingPolicy>
        <encoder>
            <pattern>${ROLLINGPATTERN}</pattern>
        </encoder>
    </appender>

    <logger name="com.my.mvc.project" level="${APPLICATION_LEVEL}" />
    <logger name="org.springframework" level="${ROOT_LEVEL}" />
    <logger name="org.apache" level="ERROR" />

    <root level="${ROOT_LEVEL}">
        <appender-ref ref="CONSOLE" />
        <!-- <appender-ref ref="ROLLING" /> -->
    </root>
</configuration>